address_label,enabled,data_old,data_new,asm,asm_label,
## Enabled patches are in Kasami's current prepatch bin,,,,,,
,,,,,,
## HALFWIDTH ASCII PATCH,,,,,,
# Character spacing 6px. Preserves menu pointer offset,TRUE,,,,,
005B4E,,322C,0009,,,
006FD8,,E401,E402,,,
# Regular text blit 6x12,TRUE,,,,,
006CD4,,E700,E706,,,
006D04,,00F4,00FA,,,
"# Shadowed text blit 6x12
# 6th column of used glyphs must be clear",TRUE,,,,,
006D92,,E700,E706,,,
006DCA,,E700,E706,,,
006DF2,,00F4,00FA,,,
"# Control code remap to lower ASCII
# Frees 140 bytes at 6F16-6FA1",TRUE,,,,,
006EE8,,E14E 74E0,E108 74E8,,,
006F04,,00E4,00FA,,,
006F08,,0108 00B8 0108 0108,00B8 00BE 00A8 009E,,,
006F10,,0108 0108 0108,00F0 00DE 00E4,,,
# Remap printable ASCII to font page 3,TRUE,,,,,
007088,,71D0,71DF,,,
00708C,,E709,E75D,,,
00714E,,821F,8820,,,
# Fix text box padding,TRUE,,,,,
005442,,76EA,76EF,,,
00546C,,77EA,77F4,,,
0054FA,,76EA,76EF,,,
005524,,77EA,77F4,,,
0055B2,,76EA,76EF,,,
0055DC,,77EA,77F4,,,
# Draw text and cursors 2 pixels further to the right in text box,TRUE,,,,,
005AE8,,7106,7108,,,
005FFC,,7205,7207,,,
0585B0,,7205,7207,,,
# TEXT SEALS: remap printable ASCII to font page 3,TRUE,,,,,
0082CC,,00D0,00DF,,,
00828A,,E309,E35D,,,
0082CE,,821F,8820,,,
# TEXT SEALS: text blit 6x12,TRUE,,,,,
0080DA,,E700,E706,,,
008108,,00F4,00FA,,,
# TEXT SEALS: character spacing 6px,TRUE,,,,,
0081BC,,311C,0009,,,
# TEXT SEALS: control code remap to lower ASCII,TRUE,,,,,
0081FC,,884E,881E,,,
008204,,890E,0009,,,
008206,,883E,881F,,,
00820A,,E13E,E11F,,,
00820E,,8905,8B05,,,
00821C,,8843,881C,,,
,,,,,,
## NAME ENTRY,,,,,,
# Change girl name default from もも to Momo,TRUE,,,,,
06AA38,,82E0 82E0,4D 6F 6D 6F,,,
06CC00,,82E0 82E0,4D 6F 6D 6F,,,
# Change dog name default from バク to Barkley,TRUE,,,,,
06AA44,,836F 834E 00FF FFFF,42 61 72 6B 6C 65 79 00,,,
06CC08,,836F 834E 0009 0009,42 61 72 6B 6C 65 79 00,,,
# Change pre-choice dog name default from ？？？？ to ????,TRUE,,,,,
056DE8,,8148 8148 8148 8148,3F 3F 3F 3F 00 00 00 00,,,
"# Change blank name placeholder to halfwidth spaces
# May be unused",TRUE,,,,,
0580E8,,8140 8140 8140 8140,20 20 20 20 20 20 20 20,,,        
# Name entry field cursor spacing,TRUE,,,,,
05859C,,4108,4100,,,
"# Function printCharCustom @6D028 (end 6D04C)
# Accepts ASCII or JIS, remaps ASCII space as needed.",TRUE,,,,,
06D028,,FFFF,2F86,"mov.l r8,@-r15",,
06D02A,,FFFF,E87F,"mov #0x7F,r8",,
06D02C,,FFFF,3487,"cmp/gt r8,r4",,
06D02E,,FFFF,8906,bt :doPrint,,
06D030,,FFFF,E820,"mov #0x20,r8",,
06D032,,FFFF,3480,"cmp/eq r8,r4",,
06D034,,FFFF,8B01,bf :printAscii,,
06D036,,FFFF,9405,"mov.w @(charSpace,pc),r4",,
06D038,,FFFF,8901,bt :doPrint,,
06D03A,,FFFF,9804,"mov.w @(baseCharAscii,pc),r8",:printAscii,
06D03C,,FFFF,348C,"add r8,r4",,
06D03E,,FFFF,D002,"mov.l @(addr_printChar,pc), r0",:doPrint,
06D040,,FFFF,402B,jmp @r0 ; TAILCALL printChar(r4),,
06D042,,FFFF,68F6,"_mov.l @r15+,r8",,
06D044,,FFFF,8140,dw 0x8140,charSpace,
06D046,,FFFF,8820,dw 0x8820,baseCharAscii,
06D048,,FFFFFFFF,0E006E00,addr printChar=0x0E006E00,addr_printChar,
# Name entry field uses printCharCustom,TRUE,,,,,
05854E,,6485,6484,,,
058552,,644D,644C,,,
0585DC,,0E006E00,0E06D028,,,
# Name entry grid uses printCharCustom,TRUE,,,,,
058874,,0E006E00,0E06D028,,,
# Name entry edits byte instead of word,TRUE,,,,,
058996,,301C,0009,,,
05899C,,0215,0214,,,
0589C0,,372C,0009,,,
0589C8,,0135,0134,,,
0589D8,,8140,0020,,,
# Fix name entry field initialization,TRUE,,,,,
0586A8,,E304,E308,,,
0586B4,,7202,7201,,,
0586D4,,317C,0009,,,
0586DE,,337C,0009,,,
0586E8,,4218,0009,,,
0586F2,,2611,2620,,,
0586F4,,76FE,76FF,,,
0586FC,,8140,20 20,,,
# Name entry accepts 8 characters,TRUE,,,,,
05855A,,E003,E007,,,
058564,,8804,8808,,,
05890C,,8804,8808,,,
05894C,,E303,E307,,,
05895E,,8804,8808,,,
0589CA,,E003,E007,,,
058A3A,,8804,8808,,,
# Fix name trimming and default setting,TRUE,,,,,
05860A,,E303,E307,,,
058610,,6121,6120,,,
058612,,611D,611C,,,
058618,,72FE,72FF,,,
05863C,,373C,0009,,,
058644,,7102,7101,,,
058656,,373C,0009,,,
058666,,2210,0009,,,
058670,,76FE,76FF,,,
05867E,,8140,0020,,,
058682,,32D6,32D7,,,
"# Function getNameCharUpdateCaps @6D04C (end 6D080)
# Must call from nameEntry as caller registers are modified",TRUE,,,,,
06D04C,,FFFF,2F86,"mov.l r8,@-r15",,
06D04E,,FFFF,4F22,"sts.l pr,@-r15",,
06D050,,FFFF,D309,"mov.l @(addr_getNameChar,pc),r3",,
06D052,,FFFF,430B,"jsr r3 ; r0=getNameChar(r4,r5)",,
06D054,,FFFF,E801,"_mov #1,r8",,
06D056,,FFFF,3B86,"cmp/hi r8,r11",,
06D058,,FFFF,8B0B,bf :done,,
06D05A,,FFFF,E840,"mov #40h,r8",,
06D05C,,FFFF,3086,"cmp/hi r8,r0",,
06D05E,,FFFF,8B08,bf :done,,
06D060,,FFFF,E85A,"mov #5Ah,r8",,
06D062,,FFFF,3086,"cmp/hi r8,r0",,
06D064,,FFFF,8905,bt :done,,
06D066,,FFFF,EB00,"mov #0,r11",,
06D068,,FFFF,2F06,"mov.l r0,@-r15",,
06D06A,,FFFF,D304,"mov.l @(addr_nameChars,pc),r3",,
06D06C,,FFFF,430B,jsr r3 ; nameChars(_r4),,
06D06E,,FFFF,64BC,"_extu.b r11,r4",,
06D070,,FFFF,60F6,"mov.l @r15+,r0",,
06D072,,FFFF,4F26,"lds.l @r15+,pr",:done,
06D074,,FFFF,000B,rts,,
06D076,,FFFF,68F6,"_mov.l @r15+,r8",,
06D078,,FFFF FFFF,0E058770,addr getNameChar=0x0E058770,addr_getNameChar,
06D07C,,FFFF FFFF,0E05879C,addr nameChars=0x0E05879C,addr_nameChars,
"# Use getNameCharUpdateCaps in nameEntry, set up for proper switching",TRUE,,,,,
058776,,8B06,8906,,,
058898,,EB00,EB02,,,
058902,,E400,E401,,,
05893A,,E301,2BB8,,,
05893C,,2B3A,0B29,,,
058A30,,0E058770,0E06D04C,,,
"# Char table, see keyinput sheet. NOT FINAL",TRUE,,,,,
0583D0,,82A0 82A2 82A4 82A6 82A8,0041 0042 0043 0044 0045,,,
~,,82CD 82D0 82D3 82D6 82D9,0028 0029 002E 002C 005F,,,
~,,82AA 82AC 82AE 82B0 82B2,0031 0020 0032 0020 0033,,,
,,,,,,
~,,82A9 82AB 82AD 82AF 82B1,0046 0047 0048 0049 004A,,,
~,,82DC 82DD 82DE 82DF 82E0,005B 005D 002F 0021 003F,,,
~,,82B4 82B6 82B8 82BA 82BC,0034 0020 0035 0020 0036,,,
,,,,,,
~,,82B3 82B5 82B7 82B9 82BB,004B 004C 004D 004E 004F,,,
~,,82E2 8140 82E4 8140 82E6,003C 003E 007E 003A 003B,,,
~,,82BE 82C0 82C3 82C5 82C7,0037 0020 0038 0020 0039,,,
,,,,,,
05842A,,82BD 82BF 82C2 82C4 82C6,0050 0051 0052 0053 0054,,,
~,,82E7 82E8 82E9 82EA 82EB,002B 003D 0024 0025 0040,,,
~,,82CE 82D1 82D4 82D7 82DA,002A 0020 0030 0020 0023,,,
,,,,,,
~,,82C8 82C9 82CA 82CB 82CC,0055 0056 0057 0058 0059,,,
~,,82ED 8140 82F0 8140 82F1,0020 0020 0020 0020 0020,,,
~,,82CF 82D2 82D5 82D8 82DB,0020 0020 0020 0020 0020,,,
,,,,,,
~,,829F 82A1 82A3 82A5 82A7,005A 0020 002D 0027 0026,,,
~,,82C1 82E1 82E3 82E5 815B,007B 007C 007D 005E 0060,,,
~,,8160 81A9 81A8 95CF 8F49,0020 81A9 81A8 81A3 81AC,,,
,,,,,,
058484,,8341 8343 8345 8347 8349,0061 0062 0063 0064 0065,,,
~,,836E 8371 8374 8377 837A,0028 0029 002E 002C 005F,,,
~,,834B 834D 834F 8351 8353,0031 0020 0032 0020 0033,,,
,,,,,,
~,,834A 834C 834E 8350 8352,0066 0067 0068 0069 006A,,,
~,,837D 837E 8380 8381 8382,005B 005D 002F 0021 003F,,,
~,,8355 8357 8359 835B 835D,0034 0020 0035 0020 0036,,,
,,,,,,
~,,8354 8356 8358 835A 835C,006B 006C 006D 006E 006F,,,
~,,8384 8140 8386 8140 8388,003C 003E 007E 003A 003B,,,
~,,835F 8361 8364 8366 8368,0037 0020 0038 0020 0039,,,
,,,,,,
0584DE,,835E 8360 8363 8365 8367,0070 0071 0072 0073 0074,,,
~,,8389 838A 838B 838C 838D,002B 003D 0024 0025 0040,,,
~,,836F 8372 8375 8378 837B,002A 0020 0030 0020 0023,,,
,,,,,,
~,,8369 836A 836B 836C 836D,0075 0076 0077 0078 0079,,,
~,,838F 8140 8392 8140 8393,0020 0020 0020 0020 0020,,,
~,,8370 8373 8376 8379 837C,0020 0020 0020 0020 0020,,,
,,,,,,
~,,8340 8342 8344 8346 8348,007A 0020 002D 0027 0026,,,
~,,8362 8383 8385 8387 815B,007B 007C 007D 005E 0060,,,
~,,8160 81A9 81A8 95CF 8F49,0020 81A9 81A8 81A2 81AC,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
## COMBO GAME REWORK,,,,,,
"# Function printLetterCombo @6D080 (end 6D0D6)
# Prints nybbles as letters starting from A, formatted for combo game
# Replaces printDialog",TRUE,,,,len 172,
06D080,,FFFF,2F86,"mov.l r8, @-r15",,
06D082,,FFFF,2F96,"mov.l r9, @-r15",,
06D084,,FFFF,4F22,"sts.l pr, @-r15",,
06D086,,FFFF,685D,"extu.w r5, r8",,
06D088,,FFFF,D310,"mov.l @(addr_clearDialog,pc), r3",,
06D08A,,FFFF,430B,jsr r3 ; clearDialog(),,
06D08C,,FFFF,0009,_nop,,
06D08E,,FFFF,D310,"mov.l @(addr_updateUI,pc), r3",,
06D090,,FFFF,430B,jsr r3 ; updateUI(),,
06D092,,FFFF,E904,"_mov #4, r9",,
06D094,,FFFF,D30B,"mov.l @(addr_offsetChar,pc), r3",,
06D096,,FFFF,430B,jsr r3 ; offsetChar(r4=1),,
06D098,,FFFF,E401,"_mov #1, r4",,
06D09A,,FFFF,608D,"extu.w r8, r0",:loop,
06D09C,,FFFF,4019,shlr8 r0,,
06D09E,,FFFF,4009,shlr2 r0,,
06D0A0,,FFFF,4009,shlr2 r0,,
06D0A2,,FFFF,9417,"mov.w @(baseChar,pc), r4",,
06D0A4,,FFFF,340C,"add r0, r4",,
06D0A6,,FFFF,D308,"mov.l @(addr_printChar,pc), r3",,
06D0A8,,FFFF,430B,jsr r3 ; printChar(r4),,
06D0AA,,FFFF,79FF,"_add #-1, r9",,
06D0AC,,FFFF,4915,cmp/pl r9,,
06D0AE,,FFFF,8B05,bf :done,,
06D0B0,,FFFF,D304,"mov.l @(addr_offsetChar,pc), r3",,
06D0B2,,FFFF,430B,jsr r3 ; offsetChar(r4=4),,
06D0B4,,FFFF,E404,"_mov #4, r4",,
06D0B6,,FFFF,4808,shll2 r8,,
06D0B8,,FFFF,AFEE,bra :loop,,
06D0BA,,FFFF,4808,_shll2 r8,,
06D0BC,,FFFF,4F26,"lds.l @r15+, pr",:done,
06D0BE,,FFFF,69F6,"mov.l @r15+, r9",,
06D0C0,,FFFF,000B,rts,,
06D0C2,,FFFF,68F6,"_mov.l @r15+, r8",,
06D0C4,,FFFF FFFF,0E005B40,addr offsetChar=0x0E005B40,addr_offsetChar,
06D0C8,,FFFF FFFF,0E006E00,addr printChar=0x0E006E00,addr_printChar,
06D0CC,,FFFF FFFF,0E0052B0,addr clearDialog=0x0E0052B0,addr_clearDialog,
06D0D0,,FFFF FFFF,0E000C30,addr updateUI=0x0E000C30,addr_updateUI,
06D0D4,,FFFF,8861,dw 0x8861,baseChar,
# Use printLetterCombo in combo game,TRUE,,,,,
038840,,0E0066C4,0E06D080,,,
0388D4,,0E0066C4,0E06D080,,,
# Change gate combo to CABG,TRUE,,,,,
0388F2,,8931,2016,,,
# Draw combo cursor in correct position (including global 2px shift),TRUE,,,,,
037E1A,,7205,720A,,,
,,,,,,
## BUG FIXES,,,,,,
# Debug portraits overflow,TRUE,,,,,
009ABA,,D007,D00F,,,
# Title wipe-in black level,TRUE,,,,,
055EDC,,0101,1010,,,
# Lemon game rock in corner after thrown,TRUE,,,,,
0523FE,,E700,E7FF,,,
# Dialog skipped in ch11 due to window not created,TRUE,,,,,
0369DC,,DD22,DD20,,,
# Image seal print area off by 1 in both axes,TRUE,,,,,
059728,,E549,E548,,,
05972C,,E41F,E420,,,
,,,,,,
## GAME & TEXT TWEAKS,,,,,,
"# Move up ""producers"" credits by 32px",TRUE,,,,,
05D91E,,E508,E504,,,
"# Remove second repetition of ""Or..."" in Judy's line at end of Ch8",TRUE,,,,,
02E452,,4A0B,0009,,,
02E458,,490B,0009,,,
"# Change save marker from [WAN WAN STORY!] to [WAN WAN SAV EN]
# to prevent crossed saves",TRUE,,,,,
00085A,,54 4F 52 59 21 5D,41 56 20 45 4E 5D,,,
# Allow name placeholders to be case sensitive,TRUE,,,,,
006A90,,8B01,8969,,,
006A92,,A068,6583,,,
006A94,,200B,0009,,,
006AE4,,00C2,00A6,,,
006AFA,,00C2,009E,,,
"# Function fillNamePlaceholderWithCaps @6D0D8 (end 6D110)
# Replaces fillNamePlaceholder, takes placeholder letter
# in param2 to determine caps state",TRUE,,,,,
06D0D8,,FFFF,2F86,"mov.l r8, @-r15",,
~,,FFFF,2F96,"mov.l r9, @-r15",,
~,,FFFF,4F22,"sts.l pr, @-r15",,
~,,FFFF,6843,"mov r4, r8",,
06D0E0,,FFFF,E920,"mov #0x20, r9",,
~,,FFFF,259A,"xor r9, r5",,
~,,FFFF,A00A,bra :loopstart,,
~,,FFFF,2959,"_and r5, r9",,
06D0E8,,FFFF,E061,"mov #0x61, r0",:loop,
~,,FFFF,3402,"cmp/hs r0, r4",,
~,,FFFF,8B03,bf :emit,,
~,,FFFF,E07A,mov #0x7A. r0,,
06D0F0,,FFFF,3406,"cmp/hi r0, r4",,
~,,FFFF,8900,bt :emit,,
~,,FFFF,3498,"sub r9, r4",,
~,,FFFF,D005,"mov.l @(addr_putPholdChar,pc), r0",:emit,
06D0F8,,FFFF,400B,jsr @r0 ; FUN_0e0067b4(r4),,
~,,FFFF,7801,"_add 0x1, r8",,
~,,FFFF,6480,"mov.b @r8, r4",:loopstart,
~,,FFFF,2448,"tst r4, r4",,
06D100,,FFFF,8BF1,bf :loop,,
~,,FFFF,4F26,"lds.l @r15+, pr",:done,
~,,FFFF,69F6,"mov.l @r15+, r9",,
~,,FFFF,000B,rts,,
06D108,,FFFF,68F6,"_mov.l @r15+, r8",,
~,,FFFF,0009,nop_pad,,
06D10C,,FFFF FFFF,0E0067B4,addr putPholdChar=0x0E0067B4,addr_putPholdChar,
# Use fillNamePlaceholderWithCaps in parseTextPlaceholders,TRUE,,,,,
006BAC,,0E0067F4,0E06D0D8,,,
# Correct cursor placement for auto enter CABG in combo game,TRUE,,,,,
03854E,,E401,E402,,,
03856E,,E402,E403,,,
0385AA,,65B3,A006,,,
0385AC,,4C0B,0009,,,
# Move chase game lower text box down to avoid sprite overlap,TRUE,,,,,
05527A,,E811,E813,,,
"# Title screen start with A or START, demo with D",TRUE,,,,,
055F6A,,C902,C912,,,
055F8C,,C910,C920,,,
# Reduce lemon game number of rounds for second sister,TRUE,,,,,
05202A,,EC06,EC03,,,
# Update copyright text with translation credit,TRUE,,,,,
000020,,28 43 29 31 39 39 35 20,28 43 29 31 39 39 35 20,,,
~,,43 41 53 49 4F 20 41 6C,43 41 53 49 4F 20 41 6C,,,
~,,6C 20 72 69 67 68 74 20,6C 20 72 69 67 68 74 73,,,
~,,72 65 73 65 72 76 65 64,20 72 65 73 65 72 76 65,,,
000040,,2E 00 76 65 72 20 35 2E,64 2E 20 28 54 29 32 30,,,
~,,35 31 00 FF FF FF FF FF,32 35 20 4B 61 73 61 6D,,,
~,,FF FF FF FF FF FF FF FF,69 2C 20 50 61 72 74 6C,,,
~,,FF FF FF FF FF FF FF FF,79 68 75 6D 61 6E 2E 20,,,
000060,,FF FF FF FF FF FF FF FF,43 65 6C 65 62 72 61 74,,,
~,,FF FF FF FF FF FF FF FF,69 6E 67 20 33 30 20 79,,,
~,,FF FF FF FF FF FF FF FF,65 61 72 73 20 6F 66 20,,,
~,,FF FF FF FF FF FF FF FF,4C 6F 6F 70 79 21 00 FF,,,
# Adjust text placement on end omake (messy),TRUE,,,,,
05DE14,,E160,E154,,,
05DE24,,E130,E12A,,,
05DE2C,,0009,EB8A,,,
05DE2E,,28A1,6BBC,,,
05DE34,,0009,28B1,,,
# Move storybook text 1 tile left and grow,TRUE,,,,,
045DB6,,E60F,E610,,,
045DBC,,E410,E40F,,,
# Move storybook text 1 tile up and grow,FALSE,,,,,
045DB4,,E70F,E710,,,
045DB8,,E50B,E50A,,,
,,,,,,
## TESTING PATCHES (choose parts as needed),,,,,,
# Skip Casio & Alfa System logos,FALSE,,,,,
000F76,,8B05,A005,,,
058B44,,8B02,A002,,,
# Boot to debug with B instead of combo,FALSE,,,,,
058B50,,8B06,A006,,,
# Alternative debug menu by default,FALSE,,,,,
058BA2,,82DC,73B8,,,
# First option in alt debug goes to normal debug,FALSE,,,,,
06ADAC,,0E058C40,0E0082DC,,,
# Extra debug opt text loads alternative menu,FALSE,,,,,
06AD00,,00000000,0E0073B8,,,
# Dialog skip/speedup with LT/RT outside debug,FALSE,,,,,
0070EA,,2118,0009,,,
# Both LT/RT are dialog skip,FALSE,,,,,
0070F2,,C904,C90C,,,
# Both LT/RT are dialog speedup (overrides skip),FALSE,,,,,
0070F6,,8B1A,0009,,,
00710C,,C908,C90C,,,
# Boot to debug menu always,FALSE,,,,,
058B6C,,8B02,0009,,,
# Ignore save checksums,FALSE,,,,,
000AD8,,E002,E000,,,
# Placeholder ROM checksum to differentiate (DISABLE WHEN READY),TRUE,,,,,
000008,,D90FE762,11EEBE7A,,,